<body>
<script>
var arr = [
        { text: "Company", id: "1", parentId:"" ,shortText:"",Icon:"",Links:""},
		{ text: "Environment", id: "2", parentId: "1" ,shortText:"",Icon:"",Links:""},
		
		{ text: "Service", id: "3", parentId: "2" ,shortText:"",Icon:"",Links:""},
		{ text: "Webservice", id: "3", parentId: "3" ,shortText:"",Icon:"",Links:""},
		{ text: "Service1", id: "3", parentId: "3" ,shortText:"",Icon:"",Links:""},
		{ text: "Service2", id: "3", parentId: "3" ,shortText:"",Icon:"",Links:""},
		{ text: "Service3", id: "3", parentId: "3" ,shortText:"",Icon:"",Links:""},
		{ text: "Service4", id: "3", parentId: "3" ,shortText:"",Icon:"",Links:""},
		{ text: "Service5", id: "3", parentId: "3" ,shortText:"",Icon:"",Links:""},
		{ text: "Service6", id: "3", parentId: "3" ,shortText:"",Icon:"",Links:""},
		{ text: "Service7", id: "3", parentId: "3" ,shortText:"",Icon:"",Links:""},
		{ text: "service8", id: "3", parentId: "3" ,shortText:"",Icon:"",Links:""},
		{ text: "service9", id: "3", parentId: "3" ,shortText:"",Icon:"",Links:""},
		{ text: "service10", id: "4", parentId: "2" ,shortText:"",Icon:"",Links:""},
		{ text: "service12", id: "4", parentId: "4" ,shortText:"",Icon:"",Links:""},
		{ text: "service13", id: "4", parentId: "4" ,shortText:"",Icon:"",Links:""},
		{ text: "service14", id: "5", parentId: "2" ,shortText:"",Icon:"",Links:""},
		{ text: "service", id: "5.1", parentId: "5" ,shortText:"",Icon:"",Links:""},
		{ text: "Service", id: "5.2", parentId: "5" ,shortText:"",Icon:"",Links:""},
		{ text: "Service", id: "5.3", parentId: "5" ,shortText:"",Icon:"",Links:""},
		{ text: "Service", id: "5.3.1", parentId: "5.3" ,shortText:"",Icon:"",Links:""},
		{ text: "Service", id: "5.3.2", parentId: "5.3" ,shortText:"",Icon:"",Links:""},
		{ text: "Service", id: "5.3.3", parentId: "5.3" ,shortText:"",Icon:"",Links:""},
		{ text: "Service", id: "5.4", parentId: "5" ,shortText:"",Icon:"",Links:""},
		{ text: "Service", id: "5.4.1", parentId: "5.4" ,shortText:"",Icon:"",Links:""},
		{ text: "Service", id: "5.4.2", parentId: "5.4" ,shortText:"",Icon:"",Links:""},
		{ text: "Service", id: "5.4.3", parentId: "5.4" ,shortText:"",Icon:"",Links:""},
		{ text: "Service", id: "6", parentId: "1" ,shortText:"",Icon:"",Links:""},
		{ text: "Service", id: "7", parentId: "6" ,shortText:"",Icon:"",Links:""},
		{ text: "Service", id: "7", parentId: "7" ,shortText:"",Icon:"",Links:""},
		{ text: "Service", id: "7", parentId: "7" ,shortText:"",Icon:"",Links:""},
		{ text: "Service", id: "7", parentId: "7" ,shortText:"",Icon:"",Links:""},
		{ text: "Service", id: "7", parentId: "7" ,shortText:"",Icon:"",Links:""},
		{ text: "Service", id: "7", parentId: "7" ,shortText:"",Icon:"",Links:""},
		{ text: "Service", id: "7", parentId: "7" ,shortText:"",Icon:"",Links:""},
		{ text: "Service", id: "7", parentId: "7" ,shortText:"",Icon:"",Links:""},
		{ text: "Service", id: "7", parentId: "7" ,shortText:"",Icon:"",Links:""},
		{ text: "Service", id: "8", parentId: "6" ,shortText:"",Icon:"",Links:""},
		{ text: "Service", id: "8", parentId: "8" ,shortText:"",Icon:"",Links:""},
		{ text: "Service", id: "8", parentId: "8" ,shortText:"",Icon:"",Links:""},
		{ text: "Service", id: "8", parentId: "8" ,shortText:"",Icon:"",Links:""},
		{ text: "Service", id: "8", parentId: "8" ,shortText:"",Icon:"",Links:""},
		{ text: "Service", id: "5", parentId: "1" ,shortText:"",Icon:"",Links:""},
		{ text: "Service", id: "2", parentId: "5" ,shortText:"",Icon:"",Links:""},
		
    ],
    data = arr.reduce(function (r, a) {
        function getParent(s, b) {
            return b.id === a.parentId ? b : (b.nodes && b.nodes.reduce(getParent, s));
        }

        var index = 0, node;
        if ('parentId' in a) {
            node = r.reduce(getParent, {});
        }
        if (node && Object.keys(node).length) {
            node.nodes = node.nodes || [];
            node.nodes.push(a);
        } else {
            while (index < r.length) {
                if (r[index].parentId === a.id) {
                    a.nodes = (a.nodes || []).concat(r.splice(index, 1));
                } else {
                    index++;
                }
            }
            r.push(a);
        }
        return r;
    }, []);

//document.write('<pre>' + JSON.stringify(data, 0, 4) + '</pre>');
read(data);
function read(jsonData){
for (var testobj in jsonData)
{
console.log("test----->"+jsonData[testobj].text);
console.log("length"+jsonData.length);
document.write('<div style="border:1px solid black;padding: 10px;border-spacing: 15px;margin:10px;">');
document.write('<button type=\'button\' style="float: right;">⊕⊖ </button>');

document.write(jsonData[testobj].text);
if (jsonData.length>0 )
read(jsonData[testobj].nodes);
document.write('</div>');


}

}
</script>
</body>
